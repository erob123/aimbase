{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"aimbase","text":"<p> Declarative, instant REST APIs for base AI Models based on instarest, a FastAPI, Pydantic, SQLAlchemy, and PostgreSQL library, and MinIO. </p> <p>Documentation: aimbase.erob.io</p> <p>Source Code: github.com/erob123/aimbase</p> <p><code>Aimbase</code> offers an opinionated yet flexible abstraction, seamlessly integrating with large object storage to safeguard proprietary or data-controlled model weights. Leveraging the instantaneous database and API configuration capabilities provided by <code>Instarest</code>, <code>Aimbase</code> presents a declarative, extensible, and opinionated framework tailored for crafting REST APIs dedicated to AI Models. It streamlines development by eliminating redundant boilerplate and promoting code reusability, proving especially valuable when working with models associated with sensitive or proprietary data.</p> <p>Our goal is to help you turn months of work into days and thousands of lines of code into less than a hundred.</p> <p>By using <code>Aimbase</code>, you will notice:</p> <ul> <li>Simplicity: your typical multi-folder, multi-file, multi-class, multi-method, multi-line, multi-annotation, multi-configuration FastAPI application will be reduced to a single file with a few lines of code.</li> <li>Consistency: your application will be built on a consistent, declarative, and opinionated foundation, making it easier to understand and maintain.</li> <li>Speed: your application will be built on a foundation that is designed to be fast, both in terms of development and runtime performance.</li> <li>Fewer Unit Tests: your application will be built on a foundation that is designed to be correct, reducing the need for extensive unit testing. Complete code coverage can be achieved with a handful of unit tests.</li> <li>Easy: Designed to be easy to use and learn. Less time reading docs.</li> <li>Extensible: <code>Aimbase</code> is built to be modular, and as such is easy to extend so that you can have your own custom, realizable opinions and abstractions. Frameworks such as YourFramework and Chainbase are built on top of <code>Aimbase</code> in this way.</li> <li>Standards-based: Based on FastAPI, which itself is based on (and fully compatible with) the open standards for APIs: OpenAPI (previously known as Swagger) and JSON Schema&lt;/a)"},{"location":"#requirements","title":"Requirements","text":"<ul> <li>Python 3.11+</li> <li>A PostgreSQL database (use <code>docker-compose</code> to get one up and running quickly)</li> <li>MinIO (used for large-object storage of proprietary or data-controlled model weights and configurations)</li> </ul>"},{"location":"#installation","title":"Installation","text":"<pre><code>$ pip install aimbase\n\n---&gt; 100%\n&lt;/div&gt;\n\n## Example\n\n### Create it\n\nLet's create a comprehensive, database-backed, large-object storage-enabled, type-checked,\nversioned REST API tailored for handling proprietary or data-controlled models with **Aimbase** in just five minutes:\n\n* Create a file `main.py` with:\n\n```Python\nfrom aimbase.crud.base import CRUDBaseAIModel\nfrom aimbase.db.base import BaseAIModel, FineTunedAIModel, FineTunedAIModelWithBaseModel\nfrom aimbase.initializer import AimbaseInitializer\nfrom aimbase.routers.sentence_transformer_router import SentenceTransformersRouter\nfrom aimbase.dependencies import get_minio\nfrom instarest import (\n    AppBase,\n    DeclarativeBase,\n    SchemaBase,\n    Initializer,\n    get_db,\n)\n\nfrom aimbase.services.sentence_transformer_inference import (\n    SentenceTransformerInferenceService,\n)\n\nInitializer(DeclarativeBase).execute()\nAimbaseInitializer().execute()\n\n# built pydantic data transfer schemas automagically\ncrud_schemas = SchemaBase(BaseAIModel)\n\n# build db service automagically\ncrud_test = CRUDBaseAIModel(BaseAIModel)\n\n## ************ DEV INITIALIZATION ONLY (if desired to simulate\n#  no internet connection...will auto init on first endpoint hit, but\n#  will not auto-upload to minio) ************ ##\nSentenceTransformerInferenceService(\n    model_name=\"all-MiniLM-L6-v2\",\n    db=next(get_db()),\n    crud=crud_test,\n    s3=get_minio(),\n    prioritize_internet_download=False,\n).dev_init()\n## ************ DEV INITIALIZATION ONLY ************ ##\n\n# build ai router automagically\ntest_router = SentenceTransformersRouter(\n    model_name=\"all-MiniLM-L6-v2\",\n    schema_base=crud_schemas,\n    crud_base=crud_test,\n    prefix=\"/sentences\",\n    allow_delete=True,\n)\n\n# setup base up from routers\napp_base = AppBase(\n    crud_routers=[test_router], app_name=\"Aimbase Inference Test App API\"\n)\n\n# automagic and version app\nauto_app = app_base.get_autowired_app()\n\n# core underlying app\napp = app_base.get_core_app()\n</code></pre>"},{"location":"#setup-the-database-and-minio","title":"Setup the database and MinIO","text":"<p>If you already have a PostgreSQL database and MinIO running, you can skip this step.</p> <p>If not, we will launch them via local containers:</p> <ol> <li> <p>First, make sure that you have docker installed and running. If you don't, you can install it by following the directions at this link.</p> </li> <li> <p>Download the <code>aimbase</code> docker-compose file:</p> </li> </ol> <pre><code>$ curl -O https://raw.githubusercontent.com/erob123/aimbase/main/docker-compose.yml\n</code></pre> <ol> <li>Launch the database and MinIO via docker-compose from the same directory as the <code>docker-compose.yml</code> file:</li> </ol> <pre><code>$ docker-compose up --build\n</code></pre>"},{"location":"#tell-your-app-how-to-connect-to-the-database-and-minio","title":"Tell your app how to connect to the database and MinIO","text":"<p>Aimbase is set up to automatically connect to PostgreSQL and MinIO with the following environment variables. To get started, create a file named <code>local.env</code> in the same directory as <code>main.py</code> with the following contents:</p> <pre><code>POSTGRES_USER=postgres\nPOSTGRES_PASSWORD=postgres\nPOSTGRES_SERVER=localhost\nPOSTGRES_PORT=5432\nPOSTGRES_DB=postgres\n\nDOCS_UI_ROOT_PATH=\"\"\nLOG_LEVEL=\"DEBUG\"\n\nMINIO_BUCKET_NAME=test\nMINIO_ACCESS_KEY=miniouser\nMINIO_SECRET_KEY=minioadmin\nMINIO_ENDPOINT_URL=localhost:9000\nMINIO_REGION=\"\"\nMINIO_SECURE=False\n</code></pre> <p>This will allow your app to connect to the database nad MinIO large object storage on launch. For reference, these values are defined within the <code>docker-compose.yml</code> file for local development, but for production they will come from your password defined through your database provider.</p>"},{"location":"#run-it","title":"Run it","text":"<p>You should now have two files in the same directory: <code>main.py</code> and <code>local.env</code>. Let's run the app with:</p> <pre><code>$ uvicorn main:auto_app --reload\n\nINFO:     Uvicorn running on http://127.0.0.1:8000 (Press CTRL+C to quit)\nINFO:     Started reloader process [28720]\nINFO:     Started server process [28722]\nINFO:     Waiting for application startup.\nINFO:     Application startup complete.\n</code></pre> About the command <code>uvicorn main:app --reload</code>... <p>The command <code>uvicorn main:auto_app</code> refers to:</p> <ul> <li><code>main</code>: the file <code>main.py</code> (the Python \"module\").</li> <li><code>auto_app</code>: the object created inside of <code>main.py</code> with the line <code>auto_app = app_base.get_autowired_app()</code>.</li> <li><code>--reload</code>: make the server restart after code changes. Only do this for development.</li> </ul>"},{"location":"#interactive-api-docs","title":"Interactive API docs","text":"<p>Now go to http://127.0.0.1:8000/v1/docs.</p> <p>You will see the automatic interactive API documentation (provided by Swagger UI):</p> <p>Congratulations! You have just created your first fully-functional REST API with Aimbase, implementing AI-based sentence embeddings backed by a database in just a few lines.</p>"},{"location":"#check-it","title":"Check it","text":""},{"location":"#step-1-send-a-test-sentence-to-the-api","title":"Step 1: Send a test sentence to the API","text":"<p>In the interactive docs (or using <code>curl</code> if you prefer), go to the POST operation for <code>/sentences/encode</code> and try it. Send this JSON body:</p> <pre><code>{\n\"documents\": [\"This is a test sentence.\"]\n}\n</code></pre> <p>You should see the <code>curl</code> that was sent</p> <pre><code>$ curl -X 'POST' \\\n'http://localhost:8000/v1/sentences/encode' \\\n-H 'accept: application/json' \\\n-H 'Content-Type: application/json' \\\n-d '{\"documents\": [\"This is a test sentence.\"]}'\n</code></pre> <p>and the response received (with calculated <code>embeddings</code>):</p> <pre><code>{\n\"embeddings\": [[0.123, 0.456, 0.789, ...]]\n}\n</code></pre> <p>And that's it! You have successfully created a base API for <code>sentence-transformers</code> embeddings. Continue through the documentation to see how to build more extensible APIs using <code>sentence-transformers</code> and other AI models with <code>aimbase</code>.</p> <p> All done in under 50 lines of code. </p>"},{"location":"#alternative-api-docs","title":"Alternative API docs","text":"<p>If you prefer, go to http://127.0.0.1:8000/v1/redoc.</p> <p>You will see the alternative automatic documentation (provided by ReDoc):</p>"},{"location":"#license","title":"License","text":"<p>This project is licensed under the terms of the MIT license.</p>"},{"location":"contributing/","title":"Contributing","text":""},{"location":"contributing/#contibuting","title":"Contibuting","text":"<ol> <li> <p>Set up the precommit hook with <code>pre-commit install</code>.</p> </li> <li> <p>Run tests and get coverage with <code>pytest --cov</code>, and get html reports for vs code live server (or any server) with <code>pytest --cov --cov-report=html:coverage_re</code></p> </li> <li> <p>Open a pull request against the repo!  Please write tests, your coverage will automatically be added as a comment to any PR via GH actions.</p> </li> </ol>"},{"location":"release-notes/","title":"Release Notes","text":""},{"location":"release-notes/#004a2","title":"0.0.4a2","text":"<ul> <li>Initial release.  Work in progress.  Examples in \"examples\" directory show best utilization.</li> </ul>"}]}